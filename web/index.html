<html>
<head>
    <!--
      ** Copyright (c) 2021 Torsten Paul
      ** Released under the MIT license
      **
      ** With thanks to tutorials at
      ** https://webdesign.tutsplus.com/tutorials/how-to-build-a-festive-advent-calendar-with-css-grid--cms-30070
      ** https://www.w3schools.com/howto/howto_css_modals.asp
      -->
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <link href="https://fonts.googleapis.com/css?family=Kalam" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">
    <link rel="stylesheet" href="snow.css">
    <title>OpenSCAD Advent Calendar 2021</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="snow.js"></script>
    <script src="feather.min.js "></script>
<script>
    function pad(num, size) {
        var s = "000000000" + num;
        return s.substr(s.length-size);
    }
    function getChild(id, tag) {
      var e = document.getElementById(id);
      for (let a = 0; a < e.children.length; a++) {
        if (e.children[a].tagName === tag) {
          return e.children[a];
        }
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
        function setupDay(button) {
          day = button.day;
          console.log("day = " + day);
          getChild("modal-body", "H1").innerHTML = "Day " + day;
          getChild("modal-body", "IMG").src = "https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/" + pad(day, 2) + ".png";
        }
        feather.replace();
        //feather.replace({ width: 20, height: 20 });
        new Snow('#snow', { number:20, r: 2.5, v: 1 });
        date = new Date();
        /*
        if (date.getUTCMonth() === 11) {
          for (day = 1;day <= date.getUTCDate();day++) {
            $(".day-" + day + " .content").removeClass("hide");
            $(".day-" + day + " .door").addClass("transform");
          }
        }
        */
	for (day = 1;day <= 24;day++) {
	  $(".day-" + day + " .content").removeClass("hide");
	  $(".day-" + day + " .door").addClass("transform");
          $(".day-" + day + " input").prop("checked",false);
	}
	var modal = document.getElementById("modal");
	var span = document.getElementsByClassName("close")[0];
	span.onclick = function() {
	  modal.style.display = "none";
	}
	window.onclick = function(event) {
	  if (event.target == modal) {
	    modal.style.display = "none";
	  }
	}
	for (b = 1;b <= 24;b++) {
	  var btn = document.getElementById("btn" + b);
	  if (btn) {
	    btn.day = b;
	    btn.onclick = function() {
              setupDay(this);
	      modal.style.display = "block";
	    }
	  }
	}
    });

</script>
<style>
#snow {
  position:fixed;
  width:100%;
  height:100%;
  background:transparent;
  z-index: -1;
}

.cal {
  display: grid;
  width: 1000px;
  margin: 2% auto;

  grid-gap: 25px 50px;
  grid-template-rows: auto;
  grid-template-columns: repeat(7, 1fr);
  grid-template-areas:
    "h   h   h   h   d12 d15 d4 "
    "h   h   h   h   d5  d24 d24"
    "d17 d14 d13 d7  d16 d24 d24"
    "d22 d11 d23 d19 d9  d18 d8 "
    "d10 d21 d2  d6  d20 d1  d3 ";
}

body {
  background-color: #444;
}

input { margin: 0; }

.cal input { display: none; }

section div {
  padding: 0px;
}

label {
  perspective: 1000px;
  -webkit-perspective: 1000px;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  cursor: pointer;

  display: flex;
  min-height: 100%;
  height: 100px;
}

.door {
  width: 100%;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  transition: all 500ms ease-in-out;
  -webkit-transition: all 500ms ease-in-out;
  transform-origin: left center;
  -webkit-transform-origin: left center;

  border: 2px dashed transparent;
  border-radius: 12px;

  font-family: 'Kalam', cursive;
  color: #9dcb51;
  font-size: 3em;
  font-weight: bold;
  text-shadow: 2px 2px 1px rgba(249, 215, 44, 1);
}

.door div {
   position: absolute;
   height: 100%;
   width: 100%;
   backface-visibility: hidden;
   -webkit-backface-visibility: hidden;
   border-radius: 12px;

   display: flex;
   align-items: center;
   justify-content: center;
}

.door .back {
   background-color: #9dcb51;
   transform: rotateY(180deg);
}

.hide {
  display: none;
}

.content {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 12px;
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.0;
  z-index: -1;
  transition: opacity 0.2s ease-out;
  vertical-align: text-bottom;
}

.content .link {
  position: absolute;
  bottom: 8px;
  right: 0px;
  text-align: center;
  background: transparent;
}

.link button {
  cursor: pointer;
  opacity: 0.2;
  border: 0px;
  background-color: transparent;
  color: #9dcb51;
  background-color: #f9d72c20;
  font-size: 1.5em;
  margin: 2px;
}

.link button:hover {
  opacity: 0.8;
  transition: opacity 0.2s ease-out;
}

label:hover .door {
  border-color: #f9d72c;
}

:checked + .transform {
  transform: translateZ(0px) translateX(0px) translateY(0px) rotateY(-105deg);
}

:checked ~ .content {
  opacity: 1;
  transition: opacity 2s ease-in;
}

.title {
  grid-area: t;
  display: flex;
  background: no-repeat left/90% url(https://www.openscad.org/images/openscad.png);
}

.header {
  grid-area: h;
  display: flex;
  color: #9dcb51;
  font-family: 'Kalam', cursive;
  font-size: 3em;
}

.small {
  font-size: 0.4em;
}

.header p {
    position: relative;
    z-index: 2;
    width: 100%;
    height: 100%;
    text-align: center;
    vertical-align: center;
}

.header img {
    position: absolute;
    left: 0;
    top: 0;
    width: auto;
    height: 100%;
    opacity: 0.1;
}

.green {
  color: #9dcb51;
}

.yellow {
  color: rgba(249, 215, 44, 1);
}

.gray {
  color: #aaa;
}

.sep {
  color: #9dcb51;
}

div.footer {
  position: fixed;
  bottom: 4px;
  width: 100%;
  text-align: center;
  font-family: sans;
  color: #aaa;
}

a.link {
  color: #aaa;
}

a.link:hover {
  color: rgba(249, 215, 44, 1);
}

.day-1 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/01.png); }
.day-2 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/02.png); }
.day-3 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/03.png); }
.day-4 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/04.png); }
.day-5 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/05.png); }
.day-6 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/06.gif); }
.day-7 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/07.png); }
.day-8 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/08.png); }
.day-9 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/09.png); }
.day-10 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/10.png); }
.day-11 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/11.gif); }
.day-12 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/12.png); }
.day-13 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/13.png); }
.day-14 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/14.png); }
.day-15 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/15.png); }
.day-16 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/16.png); }
.day-17 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/17.png); }
.day-18 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/18.png); }
.day-19 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/19.png); }
.day-20 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/20.gif); }
.day-21 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/21.png); }
.day-22 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/22.png); }
.day-23 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/23.png); }
.day-24 .content { background-image: url(https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/24.gif); }

.day-1 { grid-area: d1; }
.day-2 { grid-area: d2; }
.day-3 { grid-area: d3; }
.day-4 { grid-area: d4; }
.day-5 { grid-area: d5; }
.day-6 { grid-area: d6; }
.day-7 { grid-area: d7; }
.day-8 { grid-area: d8; }
.day-9 { grid-area: d9; }
.day-10 { grid-area: d10; }
.day-11 { grid-area: d11; }
.day-12 { grid-area: d12; }
.day-13 { grid-area: d13; }
.day-14 { grid-area: d14; }
.day-15 { grid-area: d15; }
.day-16 { grid-area: d16; }
.day-17 { grid-area: d17; }
.day-18 { grid-area: d18; }
.day-19 { grid-area: d19; }
.day-20 { grid-area: d20; }
.day-21 { grid-area: d21; }
.day-22 { grid-area: d22; }
.day-23 { grid-area: d23; }
.day-24 { grid-area: d24; }

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 5; /* Sit on top */
  padding-top: 60px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  z-index: 5; /* Sit on top */
  position: relative;
  background-color: #fefefe;
  margin: auto;
  padding: 0;
  border: 1px solid #888;
  width: 80%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  -webkit-animation-name: animatetop;
  -webkit-animation-duration: 0.4s;
  animation-name: animatetop;
  animation-duration: 0.4s
}

/* Add Animation */
@-webkit-keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

@keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

/* The Close Button */
.close {
  color: white;
  position: absolute;
  top: 16px;
  right: 16px;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

.modal-body {
  padding: 32px;
  color: #f9d72c;
  border: 2px solid #9dcb51;
  background-color: #444;
}

.modal-body h1 {
  font-family: 'Kalam', cursive;
  font-size: 5em;
  line-height: 1em;
  margin: 0 0 0 80px;
}

.modal-body p {
  font-family: sans;
  font-size: 1.2em;
  line-height: 1em;
  margin: 16px 0 0 0;
  color: #eee;
}

.modal-body img {
  width: 50%;
  margin: 0 20px 0px 0px;
}

.modal-body ul {
  padding-top: 2em;
}

.modal-body svg {
  margin: 0 0.3em -0.2em 0;
}

.modal-body li {
  font-family: sans;
  font-size: 1.8em;
  color: #9dcb51;
  list-style: none;
  line-height: 2em;
}

.modal-body a {
  color: #eee;
  text-decoration: none;
}

.modal-body br {
  display: block;
  margin-bottom: 0em;
}

.modal-body a:hover {
  color: rgba(249, 215, 44, 1);
  text-decoration: underline;
}
</style>
</head>
<body>
<div id="snow"></div>
<section class="cal">
  <div class="title"></div>
  <div class="header">
    <p>
      <span class="green">Open</span><span class="yellow">SCAD</span><br><span class="gray small"><small>Advent Calendar 2021</small></span>
      <img src="https://www.openscad.org/images/openscad.png">
    </p>
  </div>
  <div class="day-1"><label><input type="checkbox"><div class="door"><div class="front">1</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn1"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-2"><label><input type="checkbox"><div class="door"><div class="front">2</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn2"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-3"><label><input type="checkbox"><div class="door"><div class="front">3</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn3"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-4"><label><input type="checkbox"><div class="door"><div class="front">4</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn4"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-5"><label><input type="checkbox"><div class="door"><div class="front">5</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn5"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-6"><label><input type="checkbox"><div class="door"><div class="front">6</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn6"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-7"><label><input type="checkbox"><div class="door"><div class="front">7</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn7"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-8"><label><input type="checkbox"><div class="door"><div class="front">8</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn8"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-9"><label><input type="checkbox"><div class="door"><div class="front">9</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn9"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-10"><label><input type="checkbox"><div class="door"><div class="front">10</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn10"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-11"><label><input type="checkbox"><div class="door"><div class="front">11</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn11"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-12"><label><input type="checkbox"><div class="door"><div class="front">12</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn12"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-13"><label><input type="checkbox"><div class="door"><div class="front">13</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn13"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-14"><label><input type="checkbox"><div class="door"><div class="front">14</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn14"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-15"><label><input type="checkbox"><div class="door"><div class="front">15</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn15"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-16"><label><input type="checkbox"><div class="door"><div class="front">16</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn16"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-17"><label><input type="checkbox"><div class="door"><div class="front">17</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn17"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-18"><label><input type="checkbox"><div class="door"><div class="front">18</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn18"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-19"><label><input type="checkbox"><div class="door"><div class="front">19</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn19"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-20"><label><input type="checkbox"><div class="door"><div class="front">20</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn20"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-21"><label><input type="checkbox"><div class="door"><div class="front">21</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn21"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-22"><label><input type="checkbox"><div class="door"><div class="front">22</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn22"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-23"><label><input type="checkbox"><div class="door"><div class="front">23</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn23"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
  <div class="day-24"><label><input type="checkbox"><div class="door"><div class="front">24</div><div class="back"></div></div><div class="content hide"><div class="link"><button id="btn24"><i data-feather="zoom-in" width="32" height="32"></i></button></div></div></input></label></div>
</section>
<div class="footer">
<span class="sep">||</span>
<a class="link" href="https://www.openscad.org/downloads.html">Download OpenSCAD</a>
<span class="sep">||</span>
<a class="link" href="https://en.wikibooks.org/wiki/OpenSCAD_Tutorial">OpenSCAD Tutorial</a>
<span class="sep">||</span>
All scripts are licensed <a class="link" href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a>
<span class="sep">||</span>
Doors open midnight UTC
<span class="sep">||</span>
</div>
<div id="modal" class="modal">
  <div class="modal-content">
    <div id="modal-body" class="modal-body">
      <span class="close">&times;</span>
      <img align="left">
      <h1>&nbsp;</h1>
      <ul>
        <li><b>Author:</b> Someone</li>
        <li><b>License:</b> CC0</li>
        <li><i data-feather="file-text" width="32" height="32" stroke-width="1"></i><a href="https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/01.scad">01.scad</a></li>
        <li><i data-feather="printer" width="32" height="32" stroke-width="1"></i><a href="https://files.openscad.org/af6384c7-45cf-45f6-99e7-a2630e766ed3/01.3mf">01.3mf</a></li>
      </ul>
      <br clear="all">
      <p>
      </p>
    </div>
  </div>
</div>
</body>
</html>
